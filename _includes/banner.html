<div id='banner'></div>

<script>
logo = SVG('banner')
logo.viewbox({
  x: 0,
  y: 0,
  width: 96,
  height: 8
})

link = logo.link('/')

rects = {}

rect = link.defs()
           .rect(1, 1)
           .stroke({width: 0.1})
           .addClass('front')

shade = logo.defs()
            .rect(1, 1)
            .stroke({width: 0.05})
            .addClass('shade')

{% for rect in site.data.logo %}
  //logo.use(shade).move({{ rect.x }}, {{ rect.y }})
  rects[{{ rect.x }} + '-' + {{ rect.y }}] = link.use(rect).move({{ rect.x }}, {{ rect.y }})
{% endfor %}

window.onload = function start() {
  glitch();
}


function glitch() {
  target = Object.keys(rects)[Math.floor(Math.random() * Object.keys(rects).length)]
  mover = target
  rects[target].animate(2000, '<>', 1000).scale(0, 0)

  window.setInterval(function() {
    while (mover === target) {
      mover = Object.keys(rects)[Math.floor(Math.random() * Object.keys(rects).length)]
    }
    t = target.split('-')
    rects[mover].animate(1000, '<>', 100).move(t[0], t[1])
    target = mover
  }, Math.random() * 10000)
}
</script>
