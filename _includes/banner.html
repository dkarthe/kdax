<div id='banner'></div>

<script>
banner = SVG('banner')
logo = banner.link('/')
rects = []
victim = 0
anim = {
  ease: '<>',
  delay: '1s',
  duration: '2s'
}
opacity = 0.5

rect = logo.defs()
           .rect(1, 1)
           .stroke({width: 0.1})
           .addClass('front')

shade = logo.defs()
            .rect(1, 1)
            .stroke({width: 0.05})
            .addClass('shade')

$.getJSON('assets/images/logos/pikesley.svg.json', function(data) {
  banner.viewbox({
    x: 0,
    y: 0,
    width: data['width'],
    height: data['height']
  })

  $.each(data['data'], function(i, points) {
    //banner.use(shade).move(points['x'], points['y'])
    rects[i] = {
      x: points['x'],
      y: points['y'],
      rect: logo.use(rect).move(points['x'], points['y'])
    }
  })
})

window.onload = function start() {
  victim = Math.floor(Math.random() * rects.length)
  rects[victim].rect.animate(anim).opacity(opacity)
  glitch();
}

function glitch() {
  window.setInterval(function() {
    rects[victim].rect
                .animate(anim)
                .opacity(1)
    mover = Math.floor(Math.random() * rects.length)
    rects[mover].rect
                .animate(anim)
                .opacity(opacity)
    victim = mover
  }, 100)
}
</script>
